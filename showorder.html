<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>D-Live訂單顯示頁</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/4-col-portfolio.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>


    <script>
        function Submit(obj) {
            $("#divRow ").html("");
            var file = '../uploads/0918111222.jpg';
            // window.alert('file = '+file);
            // $("#img").attr('src', file);
            // window.alert('bbbbbbb');
            $.ajax({
                type: "POST",
                url: "/showorder"
            }).done(function (data) {
                // console.log('all_saved');
                // var divMain = document.getElementById("divMain");
                // window.alert('data = ' + data);
                // window.alert('data = ' + JSON.parse(data));
                var orders = data;

                // window.alert('orders ='+orders);
                // window.alert('orders.length = ' + orders.length);
                // window.alert('os ='+orderJson);
                // window.alert('os.length = ' + orderJson.length);

                for (i = 0; i < orders.length; i++) {
                    // window.alert('orders['+i+']='+orders[i]);
                    // window.alert('JSONorders['+i+']'+JSON.stringify(orders[i]));
                    // window.alert('singleOrder='+singleOrder);
                    var orderNum = orders[i].onumber;
                    var orderObj = orders[i].oobj;
                    var orderName = orderObj.orderName;
                    var orderPhone = orderObj.userphone;
                    var orderEmail = orderObj.orderEmail;
                    // var imageFile = orderObj.imageFile;
                    var imageFile = '../uploads/'+orderNum+'.jpg';
                    var orderDetailObj = orderObj.orderDetail;
                    // window.alert('orderNum['+i+'] = '+orderNum);
                    // window.alert('orderName['+i+'] = '+orderName);
                    // window.alert('orderPhone['+i+'] = '+orderPhone);
                    // window.alert('orderEmail['+i+'] = '+orderEmail);
                    // window.alert('imageFile['+i+'] = '+imageFile);
                    // window.alert('imageFile'+imageFile);
                    $("#divRow ").append(
                        $("<div>").append(
                            $("<a>").html(
                            $("<img>").attr("src",imageFile).attr("alt",imageFile)
                            ),
                            $("<h4>").html(
                                $("<output>").attr("type", "text")
                                    .attr("value", "訂單編號：" + orderNum)
                            ),
                            // $("<br>"),
                            $("<p>").html(
                                $("<output>").attr("type", "text")
                                    .attr("value", "訂購人姓名：" + orderName)
                            ),
                            // $("<br>"),
                            $("<p>").html(
                                $("<output>").attr("type", "text")
                                    .attr("value", "訂購人電話：" + orderPhone)
                            ),
                            // $("<br>"),
                            $("<p>").html(
                                $("<output>").attr("type", "text")
                                    .attr("value", "訂購人電郵：" + orderEmail)
                            ),
                            // $("<br>"),
                            $("<table>")
                                .attr("id","table"+orderNum)
                                .attr("border","1")
                                .attr("style","text-align: center;")
                                .append(
                                $("<tr>").append(
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", "人名")
                                    ),
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", "號碼")
                                    ),
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", "衣碼")
                                    ),
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", "褲碼")
                                    )
                                )
                            )

                        )

                    );
                    // var x = document.createElement("Div"); // Create a <p> node
                    // var t = document.createTextNode("訂單編號:zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx " + orderName);    // Create a text node
                    // x.appendChild(t);                                           // Append the text to <p>
                    // document.body.appendChild(x);                               // Append <p> to <body>
                    // window.alert('zzzzzzzzzzzz');

                    // var orderoutput = document.createElement("output");
                    // orderoutput.type="text";
                    // orderoutput.value="訂單編號: "+ordername;
                    // obj.form.appendChild(orderoutput);
                    // var s = document.createElement("br");
                    // obj.form.appendChild(s);
                    // window.alert('orderNum[' + i + '] = ' + orderNum);
                    // // var hh =document.createElement("h4");
                    // var textnode = document.createTextNode("Water");
                    // // divMain.innerHTML = "<h4 class='card-title' value='訂單編號' id='nonum"+i+"'/>";
                    // // var onum = document.getElementById("nonum"+i);
                    // // onum.innerHTML="<output class='ordernumber'  value ='"+orderNum+"'>";
                    // document.getElementById(divMain).appendChild(textnode);
                    // window.alert('orderDetailObj = '+orderDetailObj);


                    for (j = 0; j < orderDetailObj.length; j++) {
                        var pName = orderDetailObj[j].playerName;
                        var PNum = orderDetailObj[j].playerNumber;
                        var stSize = orderDetailObj[j].shirtSize;
                        var ptSize = orderDetailObj[j].paintSize;
                        // window.alert(pName+'|'+PNum+'|'+stSize+'|'+ptSize);
                        $("#table"+orderNum).append(
                                $("<tr>").append(
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", pName)
                                    ),
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", PNum)
                                    ),
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", stSize)
                                    ),
                                    $("<td>").html(
                                            $("<output>").attr("type", "text")
                                    .attr("value", ptSize)
                                    )
                                )
                        );
                    }
                }



            });
        }
    </script>

</head>

<body>
    <form id="sentToServer">
        <!-- <input type="text" name="data" /> -->
        <input type="button" value="Showorder" onClick="Submit(this)" />
    </form>
    <div class="container" id="divMain">
        <div class="row" id="divRow">
        </div>

    </div>
</body>

</html>